FROM us.icr.io/dia-registry/devops/build-122:latest as build

WORKDIR $GOPATH

WORKDIR $GOPATH/src/
COPY ./cmd/blockchain/ethereum/diaSatusdPlusOracleService ./

RUN go mod download github.com/diadata-org/diadata

RUN go install

FROM gcr.io/distroless/base

COPY --from=build /go/bin/diaSatusdPlusOracleService /bin/diaSatusdPlusOracleService
COPY --from=build /config/ /config/

CMD ["diaSatusdPlusOracleService"]
