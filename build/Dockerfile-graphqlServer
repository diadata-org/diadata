FROM golang:1.14 as build

WORKDIR $GOPATH/src/

COPY github.com/diadata-org $GOPATH/src/github.com/diadata-org


WORKDIR $GOPATH/src/github.com/diadata-org/diadata/cmd/http/graphqlServer

RUN go install

FROM gcr.io/distroless/base

COPY --from=build /go/bin/graphqlServer /bin/graphqlServer
COPY --from=build /go/src/github.com/diadata-org/diadata/config/ /config/
COPY --from=build /go/src/github.com/diadata-org/diadata/cmd/http/graphqlServer/schema/ /schema/


CMD ["graphqlServer"]



